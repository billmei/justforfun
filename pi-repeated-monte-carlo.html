<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
		<title>Monte Carlo method of approximating pi</title>
	</head>
	<body>
<h1>Pi Approximation</h1>
An algorithm of approximating pi based on the <a href="http://www.kortaggio.com/projects/pi-monte-carlo.html">previous code</a> using the <a href="http://mathworld.wolfram.com/MonteCarloMethod.html">Monte Carlo method</a>, except this time repeated <i>n</i> times and the results averaged in order to give a better approximation. Comments that were carried over from the previous code have been removed for efficiency, see comments in the <a href="http://www.kortaggio.com/projects/pi-monte-carlo.html">previous implementation</a> for explanations and breakdown. Implemented in JavaScript.<br /><br />
<form name="form" accept-charset="utf-8">
Number of iterations for each process: <input type="text" value="200" width="100" name="upper"><br />
Number of times to repeat the algorithm: <input type="text" value="200" width="100" name="repeat"><br />
<input type="button" width="50" value="Go" onclick="go()">
</form>

<script type="text/javascript">
function go() {
	var r = parseFloat(document.form.repeat.value); //number of times to repeat algorithm
	var p = [];
for (var k = 0; k < r; k++) {
	var n = parseFloat(document.form.upper.value);
	var inside = 0;
	var outside = 0;
	var x = [];
	var y = [];
	var d = [];
	for (var i = 0; i < n; i++) {
		x[i] = Math.random();
		y[i] = Math.random();
		d[i] = Math.sqrt(Math.pow(x[i], 2) + Math.pow(y[i], 2));
		if (d[i] < 1) {
			inside++;
		}
		else {
			outside++;
		};
	};
	p[k] = 4*inside/(inside+outside)
};
//Add all the values in the array p[], then divide by r to find the average.
var sum = 0;
for (var k = 0; k < r; k++) {
	sum = sum + p[k];
};
var average = sum/r;
document.write("The approximate value of pi is: " + average.toFixed(4));
};
</script><noscript>This document requires you to enable JavaScript in order to be viewed properly.</noscript>
<br /><span style="font-size:75%;">Created by <a href="http://www.kortaggio.com">Kortaggio</a></span>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-10730961-3']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
	</body>
</html>
